
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Exercice final / à faire à la maison &#8212; Documentation PythonQGIS_TP 2020</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/custom.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentation PythonQGIS_TP 2020</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contenu</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">Exercice final / à faire à la maison</a><ul>
<li><a class="reference internal" href="#objectif">Objectif</a></li>
<li><a class="reference internal" href="#nouvelles-notions">Nouvelles notions</a></li>
<li><a class="reference internal" href="#exercice">Exercice</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ex_maison.rst.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Exercice final / à faire à la maison</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="exercice-final-a-faire-a-la-maison">
<h1>Exercice final / à faire à la maison<a class="headerlink" href="#exercice-final-a-faire-a-la-maison" title="Lien permanent vers ce titre">¶</a></h1>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_0.png"><img alt="_images/tp8_0.png" src="_images/tp8_0.png" style="width: 40%;" /></a>
</div>
<p class="rubric"></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><strong>⚠</strong> <em>Vous devez envoyer le script permettant de répondre à l’ensemble des questions</em> <strong>⚠</strong></div></blockquote>
<div class="section" id="objectif">
<h2>Objectif<a class="headerlink" href="#objectif" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Découvrir et utiliser les algorithmes de la boite à outil de géotraitement (<em>processing algorithms</em>) en Python.</li>
<li>Combiner plusieurs géo-traitements pour répondre à une question d’analyse spatiale.</li>
</ul>
</div>
<div class="section" id="nouvelles-notions">
<h2>Nouvelles notions<a class="headerlink" href="#nouvelles-notions" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’ensemble des <strong>géo-traitements</strong> disponibles sous forme de boites de dialogues dans QGIS est également accessible au travers de l’API Python.
C’est également le cas pour les géo-traitements proposées dans QGIS par les extensions GRASS, SAGA et GDAL.</p>
<p>Contraitement aux manipulations que nous avons effectuées auparavant, ces géo-traitements prennent en entrée une (ou plusieurs) couche(s) et produisent généralement une couche en sortie.
Il s’agit par exemple de traitements tels que :</p>
<ul class="simple">
<li>Création d’une zone tampon</li>
<li>Création de Polygones Voronoi</li>
<li>Création d’une grille au format vecteur</li>
<li>Rastériserisation d’une couche vecteur</li>
<li>Etc.</li>
</ul>
<p>En utilisant le code suivant, il est possible de lister l’ensemble des algorithmes disponibles dans QGIS :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">alg</span> <span class="ow">in</span> <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">algorithms</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> --&gt; </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">alg</span><span class="o">.</span><span class="n">id</span><span class="p">(),</span> <span class="n">alg</span><span class="o">.</span><span class="n">displayName</span><span class="p">()))</span>
</pre></div>
</div>
<p>Le texte qui s’affiche est de la forme :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">native</span><span class="p">:</span><span class="n">centroids</span> <span class="o">--&gt;</span> <span class="n">Centroïdes</span>
<span class="n">native</span><span class="p">:</span><span class="n">clip</span> <span class="o">--&gt;</span> <span class="n">Couper</span>
<span class="o">...</span>
</pre></div>
</div>
<p>La partie de gauche désigne l’idenfifiant de l’algorithme (<code class="docutils literal notranslate"><span class="pre">native:centroids</span></code> par exemple)
et celle de droite son intitulé (<code class="docutils literal notranslate"><span class="pre">Centroïdes</span></code> par exemple) dans la langue utilisée par QGIS <em>(ici le français - attention certains intitulés ne sont toutefois pas traduits)</em>.
Il est ainsi possible d’accéder en Python à l’ensemble des géo-traitements de la boite à outils.</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_1.png"><img alt="_images/tp8_1.png" src="_images/tp8_1.png" style="width: 100%;" /></a>
</div>
<p>L’accès à ces algorithmes se fait via le module <code class="docutils literal notranslate"><span class="pre">processing</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">processing</span>
</pre></div>
</div>
<p><strong>➜ La fonction</strong> <code class="docutils literal notranslate"><span class="pre">algorithmHelp</span></code> <strong>va permettre d’afficher l’aide d’un algorithme</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processing</span><span class="o">.</span><span class="n">algorithmHelp</span><span class="p">(</span><span class="s2">&quot;native:centroids&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Il est indispensable de lire la documentation d’un algorithme avant de l’utiliser : c’est elle qui indique quels sont les paramètres requis pour l’utiliser.</p>
<blockquote>
<div>L’aide des différents géo-traitements peut également être affichée au format HTML à partir de la page : <a class="reference external" href="https://docs.qgis.org/3.10/en/docs/user_manual/processing_algs/index.html">https://docs.qgis.org/3.10/en/docs/user_manual/processing_algs/index.html</a>.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Centroïdes</span> <span class="p">(</span><span class="n">native</span><span class="p">:</span><span class="n">centroids</span><span class="p">)</span>

<span class="n">Cet</span> <span class="n">algorithme</span> <span class="n">créé</span> <span class="n">un</span> <span class="n">nouvelle</span> <span class="n">couche</span> <span class="n">de</span> <span class="nb">type</span> <span class="n">point</span><span class="p">,</span> <span class="n">ou</span> <span class="n">les</span> <span class="n">points</span> <span class="n">représentent</span> <span class="n">le</span> <span class="n">barycentre</span> <span class="n">des</span> <span class="n">entités</span> <span class="n">d</span><span class="s1">&#39;une couche d&#39;</span><span class="n">entrée</span><span class="o">.</span>

<span class="n">Les</span> <span class="n">attributs</span> <span class="n">associés</span> <span class="n">aux</span> <span class="n">points</span> <span class="n">dans</span> <span class="n">la</span> <span class="n">couche</span> <span class="n">de</span> <span class="n">sortie</span>  <span class="n">sont</span> <span class="n">ceux</span> <span class="n">des</span> <span class="n">points</span> <span class="n">de</span> <span class="n">la</span> <span class="n">couche</span> <span class="n">d</span><span class="s1">&#39;origine.</span>


<span class="o">----------------</span>
<span class="n">Input</span> <span class="n">parameters</span>
<span class="o">----------------</span>

<span class="n">INPUT</span><span class="p">:</span> <span class="n">Couche</span> <span class="n">source</span>

      <span class="n">Parameter</span> <span class="nb">type</span><span class="p">:</span> <span class="n">QgsProcessingParameterFeatureSource</span>

      <span class="n">Accepted</span> <span class="n">data</span> <span class="n">types</span><span class="p">:</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="n">ID</span> <span class="n">de</span> <span class="n">couche</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="n">nom</span> <span class="n">de</span> <span class="n">couche</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="n">couche</span> <span class="n">source</span>
              <span class="o">-</span> <span class="n">QgsProcessingFeatureSourceDefinition</span>
              <span class="o">-</span> <span class="n">QgsProperty</span>
              <span class="o">-</span> <span class="n">QgsVectorLayer</span>

<span class="n">ALL_PARTS</span><span class="p">:</span> <span class="n">Créer</span> <span class="n">un</span> <span class="n">centroïde</span> <span class="n">pour</span> <span class="n">chaque</span> <span class="n">partie</span>

      <span class="n">Parameter</span> <span class="nb">type</span><span class="p">:</span> <span class="n">QgsProcessingParameterBoolean</span>

      <span class="n">Accepted</span> <span class="n">data</span> <span class="n">types</span><span class="p">:</span>
              <span class="o">-</span> <span class="nb">bool</span>
              <span class="o">-</span> <span class="nb">int</span>
              <span class="o">-</span> <span class="nb">str</span>
              <span class="o">-</span> <span class="n">QgsProperty</span>

<span class="n">OUTPUT</span><span class="p">:</span> <span class="n">Centroïdes</span>

      <span class="n">Parameter</span> <span class="nb">type</span><span class="p">:</span> <span class="n">QgsProcessingParameterFeatureSink</span>

      <span class="n">Accepted</span> <span class="n">data</span> <span class="n">types</span><span class="p">:</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="n">fichier</span> <span class="n">vecteur</span> <span class="n">de</span> <span class="n">destination</span><span class="p">,</span> <span class="n">par</span> <span class="n">ex</span><span class="o">.</span> <span class="s1">&#39;d:/test.shp&#39;</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="s1">&#39;memory:&#39;</span> <span class="n">pour</span> <span class="n">stocker</span> <span class="n">le</span> <span class="n">résultat</span> <span class="n">dans</span> <span class="n">une</span> <span class="n">couche</span> <span class="n">temporaire</span> <span class="n">en</span> <span class="n">mémoire</span>
              <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="n">using</span> <span class="n">vector</span> <span class="n">provider</span> <span class="n">ID</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">destination</span> <span class="n">URI</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="s1">&#39;postgres:…&#39;</span> <span class="n">to</span> <span class="n">store</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">PostGIS</span> <span class="n">table</span>
              <span class="o">-</span> <span class="n">QgsProcessingOutputLayerDefinition</span>
              <span class="o">-</span> <span class="n">QgsProperty</span>

<span class="o">----------------</span>
<span class="n">Outputs</span>
<span class="o">----------------</span>

<span class="n">OUTPUT</span><span class="p">:</span>  <span class="o">&lt;</span><span class="n">QgsProcessingOutputVectorLayer</span><span class="o">&gt;</span>
      <span class="n">Centroïdes</span>
</pre></div>
</div>
<p>Cette aide nous apprend :</p>
<ul class="simple">
<li>Que l’algorithme s’utilise avec 3 paramètres d’entrés : <code class="docutils literal notranslate"><span class="pre">INPUT</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL_PARTS</span></code> et <code class="docutils literal notranslate"><span class="pre">OUTPUT</span></code> <em>(nous allons voir comment les utiliser simplement ensuite)</em>,</li>
<li>Que le résultat attendu est de type <code class="docutils literal notranslate"><span class="pre">QgsProcessingOutputVectorLayer</span></code> : cet objet va nous permettre d’obtenir une couche de type <code class="docutils literal notranslate"><span class="pre">QgsVectorLayer</span></code> comme manipulé dans les TP précédents si l’éxécution se déroule sans problème.</li>
</ul>
<p><strong>➜ La fonction</strong> <code class="docutils literal notranslate"><span class="pre">run</span></code> <strong>va permettre d’éxécuter l’algorithme</strong>.</p>
<p>Son premier argument est l’identifiant de l’algorithme à éxécuter et son second argument est un dictionnaire Python (objet <code class="docutils literal notranslate"><span class="pre">dict</span></code>) décrivant
les paramètres de l’algorithme (couche(s) en entrées, type de sortie, éventuelles options.)</p>
<p>L’exemple suivant utilise une de mes couches (nommée <code class="docutils literal notranslate"><span class="pre">park</span></code> dans mon projet QGIS) pour calculer le centroide de chaque entité.
Le résultat est stocké dans une couche temporaire en mémoire et est ajouté au projet actuel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s2">&quot;park&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="s2">&quot;native:centroids&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span> <span class="s1">&#39;ALL_PARTS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;TEMPORARY_OUTPUT&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>L’exécution du code précédent correspond ainsi à l’action suivante dans l’interface de QGIS :</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_2.png"><img alt="_images/tp8_2.png" src="_images/tp8_2.png" style="width: 100%;" /></a>
</div>
<p>Dans l’interface, on retrouve également après l’éxécution, dans l’onglet <code class="docutils literal notranslate"><span class="pre">Journal</span></code> le dictionnaire des <strong>paramètres en entrée</strong>
utilisé pour ce géo-traitement :</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_3.png"><img alt="_images/tp8_3.png" src="_images/tp8_3.png" style="width: 100%;" /></a>
</div>
<p>Puisque l’on obtient une nouvelle couche, il est ainsi possible d’enchainer plusieurs traitements de ce type de manière simple.
Si je cherche à créer des polygones de Voronoi qui correspondent à mes parks (cet algorithme nécessite une couche de points en entrée),
je peux ainsi réaliser les traitements suivants :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_layer</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s2">&quot;park&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># 1. Calcul des centroides</span>
<span class="n">result_centroids</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
  <span class="s2">&quot;native:centroids&quot;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">input_layer</span><span class="p">,</span> <span class="s1">&#39;ALL_PARTS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;TEMPORARY_OUTPUT&#39;</span><span class="p">})</span>
<span class="n">centroid_layer</span> <span class="o">=</span> <span class="n">result_centroids</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="c1"># 2. Calcul des polygones de voronoi</span>
<span class="c1"># et choix d&#39;un chemin pour enregister le résultat :</span>
<span class="n">result_voronoi</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
  <span class="s2">&quot;qgis:voronoipolygons&quot;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">centroid_layer</span><span class="p">,</span> <span class="s1">&#39;BUFFER&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;TEMPORARY_OUTPUT&#39;</span><span class="p">})</span>
<span class="c1"># 3. Ajout des polygones de voronoi au projet</span>
<span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">result_voronoi</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_4.png"><img alt="_images/tp8_4.png" src="_images/tp8_4.png" style="width: 100%;" /></a>
</div>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_5.png"><img alt="_images/tp8_5.png" src="_images/tp8_5.png" style="width: 100%;" /></a>
</div>
<p>Ici <code class="docutils literal notranslate"><span class="pre">result_voronoi['OUTPUT']</span></code> est un objet de type <code class="docutils literal notranslate"><span class="pre">QgsVectorLayer</span></code> comme manipulé dans les TP précédents : il est possible de changer son nom dans l’interface et ceci
est conseillé afin d’identifier plus facilement vos couches.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_voronoi</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="s1">&#39;voronoi_park&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_6.png"><img alt="_images/tp8_6.png" src="_images/tp8_6.png" style="width: 60%;" /></a>
</div>
</div>
<div class="section" id="exercice">
<h2>Exercice<a class="headerlink" href="#exercice" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous souhaitons savoir plus sur le profil socio-démographique des habitants de Paris en utilisant un découpage original : celui qui peut être obtenus à partir des stations de métros.</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_7.png"><img alt="_images/tp8_7.png" src="_images/tp8_7.png" style="width: 100%;" /></a>
</div>
<p>En effet nous souhaitons répondre à plusieurs questions telles que:</p>
<ul class="simple">
<li>quels sont les niveaux de revenus à proximité de ma station de métro ?</li>
<li>quelles stations de métro sont situées dans les zones les plus dénsément peuplées ?</li>
</ul>
<p>Pour y répondre nous allons utiliser les couches de données suivantes :</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">IRIS_MENAGE_PARIS</span></code> : les données socio-économique disponibles au niveau des <strong>IRIS</strong> situés à Paris (les données proviennent de l’APUR <a class="footnote-reference" href="#f1" id="id1">[1]</a> et ont été enrichies avec des données de l’INSEE <a class="footnote-reference" href="#f2" id="id2">[2]</a>). dispose de plusieurs champs qui vont nous intéresser, <code class="docutils literal notranslate"><span class="pre">RDEC_MED16</span></code> : le revenu médian déclaré par ménage, <code class="docutils literal notranslate"><span class="pre">nb_tmm</span></code> le …</li>
<li><code class="docutils literal notranslate"><span class="pre">STATION_METRO</span></code> : les stations de métro situés dans Paris (les données proviennent de l’APUR <a class="footnote-reference" href="#f3" id="id3">[3]</a>). Cette couche dispose notamment d’un champ nommé <code class="docutils literal notranslate"><span class="pre">L_STATION</span></code> : le nom de la station.</li>
</ul>
<p class="rubric"></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>0.</strong> Télécharger l’archive zippée qui contient les données : <a class="reference external" href="http://ldkflsdkfl.fdlfsk">http://ldkflsdkfl.fdlfsk</a></p>
<p>La décompresser dans votre espace de travail.</p>
<p>Créer un nouveau projet QGIS utilisant la projection <strong>EPSG:2154 (Lambert 93 / RGF 93)</strong>.</p>
<p>Ajouter les couches <code class="docutils literal notranslate"><span class="pre">STATION_METRO.shp</span></code> et <code class="docutils literal notranslate"><span class="pre">IRIS_MENAGE_PARIS.shp</span></code> et s’assurer qu’elles sont bien dans la même projection que le projet.</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_8.png"><img alt="_images/tp8_8.png" src="_images/tp8_8.png" style="width: 100%;" /></a>
</div>
<blockquote>
<div><strong>⚠</strong> <em>L’ensemble des étapes suivantes doit être effectué en Python. Une capture d’écran vous indique quel est le résultat attendu à l’issue de chaque étape.</em> <strong>⚠</strong></div></blockquote>
<p><strong>1.</strong> Obtenir une référence Python aux couches <code class="docutils literal notranslate"><span class="pre">STATION_METRO</span></code> et <code class="docutils literal notranslate"><span class="pre">IRIS_MENAGE_PARIS</span></code>. Appliquer le style du fichier <code class="docutils literal notranslate"><span class="pre">Style_STATION_METRO_PARIS.qml</span></code> à la couche <code class="docutils literal notranslate"><span class="pre">STATION_METRO</span></code>.</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_9.png"><img alt="_images/tp8_9.png" src="_images/tp8_9.png" style="width: 100%;" /></a>
</div>
<p><strong>2.</strong> À partir de la couche <code class="docutils literal notranslate"><span class="pre">IRIS_MENAGE_PARIS</span></code> et en utilisant l’aglorithme <code class="docutils literal notranslate"><span class="pre">native:dissolve</span></code>, créer une couche correspondant à l’emprise de la ville de Paris, l’ajouter au projet actuel et la renommer <code class="docutils literal notranslate"><span class="pre">COMMUNE_PARIS</span></code>.</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_10.png"><img alt="_images/tp8_10.png" src="_images/tp8_10.png" style="width: 100%;" /></a>
</div>
<p><strong>3.</strong> En vous aidant de l’exemple vu au dessus, calculez les polygones de voronoi qui correspondant à la couche <cite>STATION_METRO</cite> en utilisant un buffer de 20% et ajoutez les à la carte.
En utilisant vous connaissance en SIG, sélectionnez puis éxécutez ensuite le géotraitement qui vous permet de découper ces polygones de voronoi par la couche obtenue <cite>COMMUNE_PARIS</cite> afin d’obtenir le résultat suivant :</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_11.png"><img alt="_images/tp8_11.png" src="_images/tp8_11.png" style="width: 100%;" /></a>
</div>
<p>Ajoutez ce résultat au projet actuel.</p>
<p><strong>4.</strong> En utilisant les notions vues dans les TP précédents, calculer ..</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_12.png"><img alt="_images/tp8_12.png" src="_images/tp8_12.png" style="width: 100%;" /></a>
</div>
<p><strong>5.</strong> En utilisant des éléments vus dans les TP précédents, réorganiser les couches afin qu’elles apparaissent dans l’ordre qui suit :</p>
<div class="figure align-center" style="width: 98%">
<a class="reference internal image-reference" href="_images/tp8_13.png"><img alt="_images/tp8_13.png" src="_images/tp8_13.png" style="width: 100%;" /></a>
</div>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>APUR (Atelier Parisien d’Urbanisme) - Jeu de données «&nbsp;RECENSEMENT IRIS MENAGE&nbsp;» : <a class="reference external" href="https://opendata.apur.org/datasets/recensement-iris-menage">https://opendata.apur.org/datasets/recensement-iris-menage</a>. Données téléchargées le 08/04/2020.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>INSEE - Jeu de données&nbsp;» Revenus, pauvreté et niveau de vie en 2016 (IRIS)&nbsp;»&nbsp;» : <a class="reference external" href="https://www.insee.fr/fr/statistiques/4295611">https://www.insee.fr/fr/statistiques/4295611</a>. Données téléchargées le 08/04/2020.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>APUR (Atelier Parisien d’Urbanisme) - Jeu de données «&nbsp;STATION TRANSPORT&nbsp;» : <a class="reference external" href="https://opendata.apur.org/datasets/station-transport">https://opendata.apur.org/datasets/station-transport</a>. Données téléchargées le 08/04/2020.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
            
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentation PythonQGIS_TP 2020</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2019-2020, Matthieu Viry. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>